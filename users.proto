syntax = "proto3";

package users;
// The users service definition.
service Users {

  // This function will create a new user account for the user.
  rpc createUserAccount (CreateUserRequest) returns (CreateUserReply) {}
  
  // This function will allow a user to login to their account.
  rpc loginUserAccount (LoginUserRequest) returns (LoginUserReply) {}

  rpc deleteUserAccount (DeleteUserRequest) returns (DeleteUserReply) {}

  // This function will allow a user to update their password.
  rpc updateUserAccount (UpdateUserRequest) returns (UpdateUserReply) {}

  // filesystem methods
  rpc fsGetAttr (GetAttrRequest) returns (GetAttrReponse) {}
  rpc fsReadDir (GetReadDirRequest) returns (GetReadDirResponse) {}
  rpc fsStat (GetStatRequest) returns (GetStatResponse) {}
  rpc fsRead (GetReadRequest) returns (GetReadResponse) {}
  rpc fsWrite (GetWriteRequest) returns (GetReadResponse) {}
  rpc fsRelease (GetReleaseRequest) returns (GetReleaseResponse) {}
  rpc fsFlush (GetFlushRequest) returns (GetFlushResponse) {}
  rpc fsOpen (GetOpenRequest) returns (GetOpenResponse) {}
  rpc fsCreate (GetCreateRequest) returns (GetCreateResponse) {}
  rpc fsAccess (GetAccessRequest) returns (GetCreateResponse) {}
  // file methods
  // rpc fileOpen () returns () {}
  // rpc fileRead () returns () {}
}

// Define a message describing a single user
message CreateUserRequest {
  string username = 1;
  string password = 2;
  string confirmation = 3;
}

message CreateUserReply {
  bool success = 1; 
}

// Define a message describing a single user
message LoginUserRequest {
  string username = 1;
  string password = 2;
}

// Define a message to log a user in
message LoginUserReply {
  bool success = 1; 
  string token = 2;
}

// Define a message to delete a user
message DeleteUserRequest {
  string token = 1;
  string username = 2;
}

message DeleteUserReply {
  bool success = 1;
}

// Define a message describing a single user
message UpdateUserRequest {
  string password = 1;
  string token = 2;
  string username = 3;
}

message UpdateUserReply {
  int32 code = 1;
}

message GetAttrRequest {
  string path = 1;
  string fh = 2;
}

message GetAttrReponse {
  string data = 1;
}

message GetReadDirRequest {
  string path = 1;
  string fh = 2;
}

message GetReadDirResponse {
  string data = 1;
}

message GetStatRequest {
  string path = 1;
}

message GetStatResponse {
  string data = 1;
}

message GetReadRequest{
  string path = 1;
  int32 length = 2;
  int32 offset = 3;
  bytes fh = 4;
}

message GetReadResponse{
  bytes data = 1;
}

message GetWriteRequest{
  string path = 1;
  string buf = 2;
  int32 offset = 3;
  bytes fh = 4;
}

message GetWriteResponse{
  bytes data = 1;
}

message GetReleaseRequest{
  string path = 1;
  int32 fh = 2;
}

message GetReleaseResponse{
  string data = 1;
}

message GetFlushRequest{
  string path = 1;
  int32 fh = 2;
}

message GetFlushResponse{
  string data = 1;
}

message GetOpenRequest{
  string path = 1;
  int32 flags = 2;
}

message GetOpenResponse{
  string data = 1;
}

message GetCreateRequest{
  string path = 1;
  string mode = 2;
  string fi = 3;
}

message GetCreateResponse{
  string data = 1;
}

message GetAccessRequest{
  string path = 1;
  int32 mode = 2;
}

message GetAccessResponse{
  string data = 1;
}